---
title: 【ポエム】ロジカルでありたい。
date: "2023-05-31T02:27:34+0900"
---

あるツイートがバズっていた。

https://twitter.com/fumieval/status/1663161595009314819

**true** か **false** どちらを返すべきか。

ある程度経験を積んだプログラマなら、**true** を返す方が自然に感じるのではないでしょうか。

このツイートには多くの意見が寄せられていて、**false を返した方が良い** という意見の他にも、 **null を返すべき** や、 **例外を投げるべき** 、**「要件による」** などなど、、

色々な意見があります。

## 集合と論理

**true** を返すべき理由を考えてみます。

_配列 A のすべての要素は条件を満たす_

この命題の対偶は、

_配列 A の要素は少なくともひとつ条件を満たさない_

配列 A が空配列のとき、命題の対偶は明らかに **偽** です。つまり、命題は **真** といえる。

以上から、`「配列のすべての要素が条件を満たすなら true を返す」関数` は空配列を渡された時は当然 **true** が返ることが期待されます。

**true** 以外を返すと、それは論理が破綻していますね。

直感的でロジカルで無矛盾である実装が保守性を高めるもので、それに従わない実装が往々にして後々バグを引き起こしてしまうものです。

保守性の観点から見ても、絶対に **true** を返すべきでしょう。

## 空集合は任意の集合の部分集合である

これは **空集合の公理** ですね。

上で行った証明は、実はこの公理の証明まんまでした。

こうとも言えます。

空集合の公理に基づいて、_配列のすべての要素が条件を満たす_ これを集合 S と置くと、空集合は集合 S の部分集合なので、

**配列のすべての要素が条件を満たすなら true を返す** ならば空配列でも当然 **true** ですね。

以上です :wink:
